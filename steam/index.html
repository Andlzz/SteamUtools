<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Display Buttons with PersonaNames</title>
</head>
<body>

<div id="button-container">
    <!-- 按钮将被动态创建并插入到这里 -->
</div>

<script>
    // 定义一个异步函数来处理Promise
    async function displayButtons() {
        try {
            // 等待Promise解决
            const users = await window.services.steamService.readLoginUsersVdf();
            console.log("类型" + typeof(users) + " 内容" + users);

            // 获取按钮容器
            const buttonContainer = document.getElementById('button-container');

            // 遍历用户数组，为每个用户创建一个按钮并添加到页面
            users.forEach((user, index) => {
                // 创建按钮元素
                const button = document.createElement('button');
                // 设置按钮文本为用户的PersonaName
                button.textContent = user.PersonaName;
                // 可以为按钮添加点击事件处理函数
                button.addEventListener('click', () => {
                    // todo 调用登录接口
                    alert(`Clicked ${user.PersonaName}!`);
                });
                // 将按钮添加到容器中
                buttonContainer.appendChild(button);
            });
        } catch (error) {
            console.error('Failed to display buttons:', error);
        }
    }

    // 调用函数
    displayButtons();
</script>

</body>
</html>